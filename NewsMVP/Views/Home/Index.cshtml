@{
    ViewData["Title"] = "Index";
}

<section class="hero-section">
    <div class="container">
        <div class="hero-grid">
            <div class="main-slider">
                @await Component.InvokeAsync("MainSlider")

                <div class="slider-controls">
                    <div class="slider-dots"></div>
                    <div class="slider-arrows">
                        <button class="slider-arrow slider-prev"><i class="fas fa-chevron-right"></i></button>
                        <button class="slider-arrow slider-next"><i class="fas fa-chevron-left"></i></button>
                    </div>
                </div>
            </div>

            <div class="side-news">
                @await Component.InvokeAsync("SideNews")
            </div>
        </div>
    </div>
</section>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const slides = document.querySelectorAll(".slide");
        const dots = document.querySelectorAll(".slider-dot");
        const nextBtn = document.querySelector(".slider-next");
        const prevBtn = document.querySelector(".slider-prev");
        let currentIndex = 0;
        const totalSlides = slides.length;

        function showSlide(index) {
            slides.forEach((slide, i) => {
                slide.classList.toggle("active", i === index);
                if (dots[i]) dots[i].classList.toggle("active", i === index);
            });
        }

        function nextSlide() {
            currentIndex = (currentIndex + 1) % totalSlides;
            showSlide(currentIndex);
        }

        function prevSlide() {
            currentIndex = (currentIndex - 1 + totalSlides) % totalSlides;
            showSlide(currentIndex);
        }

        dots.forEach(dot => {
            dot.addEventListener("click", function () {
                currentIndex = parseInt(this.getAttribute("data-index"));
                showSlide(currentIndex);
            });
        });

        nextBtn.addEventListener("click", nextSlide);
        prevBtn.addEventListener("click", prevSlide);
        setInterval(nextSlide, 5000);
        showSlide(currentIndex);
    });
</script>


<section class="news-grid-section">
    <div class="container">
        <div class="section-header">
            <h2 class="section-title">آخرین اخبار</h2>
            <a class="view-all" asp-controller="Home" asp-action="ShowAll">مشاهده همه <i class="fas fa-angle-left"></i></a>
        </div>

        @await Component.InvokeAsync("LatestNewsHome")
    </div>
</section>

<div class="container">
    <div class="category-tabs">
        <div class="category-tab active" data-tab="politics">سیاسی</div>
        <div class="category-tab" data-tab="economy">اقتصادی</div>
        <div class="category-tab" data-tab="social">اجتماعی</div>
        <div class="category-tab" data-tab="culture">فرهنگی</div>
        <div class="category-tab" data-tab="sports">ورزشی</div>
    </div>
    <div class="category-content active" id="politics">
        @await Component.InvokeAsync("CategoryNews", new { categoryName = "سیاسی" })
    </div>
    <div class="category-content" id="economy">
        @await Component.InvokeAsync("CategoryNews", new { categoryName = "اقتصادی" })
    </div>
    <div class="category-content" id="social">
        @await Component.InvokeAsync("CategoryNews", new { categoryName = "اجتماعی" })
    </div>
    <div class="category-content" id="culture">
        @await Component.InvokeAsync("CategoryNews", new { categoryName = "فرهنگی" })
    </div>
    <div class="category-content" id="sports">
        @await Component.InvokeAsync("CategoryNews", new { categoryName = "ورزشی" })
    </div>
</div>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const tabs = document.querySelectorAll(".category-tab");
        const contents = document.querySelectorAll(".category-content");

        tabs.forEach(tab => {
            tab.addEventListener("click", () => {
                tabs.forEach(t => t.classList.remove("active"));
                contents.forEach(c => c.classList.remove("active"));
                tab.classList.add("active");
                const id = tab.getAttribute("data-tab");
                document.getElementById(id).classList.add("active");
            });
        });
    });

</script>
<div style="margin-bottom: 60px;"></div>
